message(STATUS "Setting up Eosio Wasm Toolchain @EOSIO_CDT_VERSION@ at @BLANC_ROOT_DIR@")

set(CMAKE_SYSTEM_NAME Generic)
set(CMAKE_SYSTEM_PROCESSOR wasm)
set(CMAKE_CROSSCOMPILING 1)
set(CMAKE_C_COMPILER_WORKS 1)
set(CMAKE_CXX_COMPILER_WORKS 1)

set(CMAKE_C_COMPILER "@BLANC_ROOT_DIR@/bin/@BLANC_C_COMPILER_BACKEND_FALLBACK@")
set(CMAKE_CXX_COMPILER "@BLANC_ROOT_DIR@/bin/@BLANC_CXX_COMPILER_BACKEND_FALLBACK@")
set(CMAKE_ASM_COMPILER "@BLANC_ROOT_DIR@/bin/@BLANC_C_COMPILER_BACKEND_FALLBACK@")
set(CMAKE_AR "@BLANC_ROOT_DIR@/bin/@BLANC_AR@" CACHE FILEPATH "Archiver")
set(CMAKE_RANLIB "@BLANC_ROOT_DIR@/bin/@BLANC_RANLIB@" CACHE FILEPATH "Ranlib")

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} --target=wasm32")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} --target=wasm32")
set(CMAKE_ASM_FLAGS "${CMAKE_ASM_FLAGS} -fasm")
set(CMAKE_LD_FLAGS "${CMAKE_LD_FLAGS} --target=wasm32")

set(CMAKE_DEPENDS_USE_COMPILER 0)

set(CMAKE_EXECUTABLE_SUFFIX_C ".wasm")
set(CMAKE_EXECUTABLE_SUFFIX_CXX ".wasm")

set(CMAKE_FIND_ROOT_PATH "@BLANC_ROOT_DIR@")
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)

# hack for OSX
set(CMAKE_OSX_SYSROOT="@SYSROOT_DIR@")
set(CMAKE_OSX_DEPLOYMENT_TARGET="")
